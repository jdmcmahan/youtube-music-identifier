# YouTube Music Identifier

> Note: This project is currently in development and **will not** work perfectly in every scenario. The code is crap. You have been warned.

This project is meant to be a companion to the wonderful [youtube-music-library-exporter](https://github.com/eexit/youtube-music-library-exporter) project. Rather than downloading the music files using [yt-dlp](https://github.com/yt-dlp/yt-dlp) (which can be problematic), the YouTube Music Identifier application takes advantage of already-downloaded songs from [Google Takeout](https://takeout.google.com).

The YouTube Music Identifier works by matching the song files from Google Takeout with metadata generated by the YouTube Music Library Exporter. The YouTube Music Library Exporter can then be used to finish organizing the files in a meaningful way.

## Preparation

Before using this utility, you'll need to follow the steps of the YouTube Music Library Exporter up to (and including) the [Build the metadata file](https://github.com/eexit/youtube-music-library-exporter#build-the-metadata-file) step. This will be your input to the utility.

You will also need to [export your YouTube Music uploads](https://www.blisshq.com/music-library-management-blog/2020/11/11/bringing-back-home-exporting-youtube-music-library/) and extract the resulting download. To avoid false-positive matches, it is highly recommended to consolidate chunked downloads into a single directory.

### Launching in Docker

Run the following commands to build and launch the utility in Docker:

```bash
$ docker build -t youtube-music-organizer .
$ docker run -it --rm -v ${pwd}/music-uploads:/input -v ${pwd}/done:/output -v ${pwd}/metadata.json:/metadata/metadata.json youtube-music-organizer
```

### Launching locally

```bash
$ pip3 install -r requirements.txt
$ python3 youtube-music-organizer --help
```

## Usage

```bash
identify.py [-d DIR] [-o OUTPUT_DIR] [--copy] metadata
```

|Parameter|Description|
|:--------|:----------|
|`-h`, `--help`|show help message and exit|
|`-d`, `--dir`|the input directory containing music files to identify (defaults to the current working directory)|
|`-o`, `--output-dir`|the output directory (defaults to the current working directory)|
|`--copy`|copy files instead of moving/renaming them|

This utility is interactive. To resolve any ambiguity, you will be prompted with more details about the file to help with determining the correct match.

### Examples:

```bash
$ identify.py -d ./music-uploads -o ./done --copy metadata.json
```